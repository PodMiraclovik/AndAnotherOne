<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Serverless Image Processing</title>
</head>
<body>
    <h1>Serverless Image Processing</h1>
    <p>Upload an image and see how it will be processed using a serverless function on Vercel.</p>
    <form action="/api/image" method="post" enctype="multipart/form-data">
        <input type="file" name="image" accept="image/*" required>
        <input type="submit" value="Upload">
    </form>
    <div id="result"></div>
    <script>
        // ???????? ???????? ????? ? ??????????
        const form = document.querySelector("form");
        const result = document.querySelector("#result");

        // ????????? ?????????? ??????? ???????? ?????
        form.addEventListener("submit", async (event) => {
            // ???????? ???????? ?? ?????????
            event.preventDefault();

            // ??????? ?????? FormData ? ??????? ?????
            const formData = new FormData(form);

            // ?????????? ?????? ? ???????????? ???????
            const response = await fetch("/api/image", {
                method: "POST",
                body: formData,
            });

            // ????????? ?????? ??????
            if (response.ok) {
                // ???????? URL ????????????? ???????????
                const imageUrl = await response.text();

                // ??????? ??????? ??????????? ? ???? URL
                const image = document.createElement("img");
                image.src = imageUrl;

                // ??????? ? ????????? ??????? ??????????? ? ?????????
                result.innerHTML = "";
                result.appendChild(image);
            } else {
                // ??????? ????????? ?? ??????
                result.textContent = "An error occurred while processing the image.";
            }
        });
    </script>
</body>
</html>
